Task1 èµ›é¢˜ç†è§£
èµ›é¢˜ä»¥é‡‘èé£æ§ä¸­çš„ä¸ªäººä¿¡è´·ä¸ºèƒŒæ™¯ï¼Œè¦æ±‚é€‰æ‰‹æ ¹æ®è´·æ¬¾ç”³è¯·äººçš„æ•°æ®ä¿¡æ¯é¢„æµ‹å…¶æ˜¯å¦æœ‰è¿çº¦çš„å¯èƒ½ï¼Œä»¥æ­¤åˆ¤æ–­æ˜¯å¦é€šè¿‡æ­¤é¡¹è´·æ¬¾ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„åˆ†ç±»é—®é¢˜ã€‚é€šè¿‡è¿™é“èµ›é¢˜æ¥å¼•å¯¼å¤§å®¶äº†è§£é‡‘èé£æ§ä¸­çš„ä¸€äº›ä¸šåŠ¡èƒŒæ™¯ï¼Œè§£å†³å®é™…é—®é¢˜ï¼Œå¸®åŠ©ç«èµ›æ–°äººè¿›è¡Œè‡ªæˆ‘ç»ƒä¹ ã€è‡ªæˆ‘æé«˜ã€‚

1.1 å­¦ä¹ ç›®æ ‡
ç†è§£èµ›é¢˜æ•°æ®å’Œç›®æ ‡ï¼Œæ¸…æ¥šè¯„åˆ†ä½“ç³»ã€‚

1.2 äº†è§£èµ›é¢˜
èµ›é¢˜æ¦‚å†µ
æ•°æ®æ¦‚å†µ
é¢„æµ‹æŒ‡æ ‡
åˆ†æèµ›é¢˜
1.2.1 èµ›é¢˜æ¦‚å†µ
æ¯”èµ›è¦æ±‚å‚èµ›é€‰æ‰‹æ ¹æ®ç»™å®šçš„æ•°æ®é›†ï¼Œå»ºç«‹æ¨¡å‹ï¼Œé¢„æµ‹é‡‘èé£é™©ã€‚
èµ›é¢˜ä»¥é¢„æµ‹é‡‘èé£é™©ä¸ºä»»åŠ¡ï¼Œæ•°æ®é›†æŠ¥ååå¯è§å¹¶å¯ä¸‹è½½ï¼Œè¯¥æ•°æ®æ¥è‡ªæŸä¿¡è´·å¹³å°çš„è´·æ¬¾è®°å½•ï¼Œæ€»æ•°æ®é‡è¶…è¿‡120wï¼ŒåŒ…å«47åˆ—å˜é‡ä¿¡æ¯ï¼Œå…¶ä¸­15åˆ—ä¸ºåŒ¿åå˜é‡ã€‚ä¸ºäº†ä¿è¯æ¯”èµ›çš„å…¬å¹³æ€§ï¼Œå°†ä¼šä»ä¸­æŠ½å–80ä¸‡æ¡ä½œä¸ºè®­ç»ƒé›†ï¼Œ20ä¸‡æ¡ä½œä¸ºæµ‹è¯•é›†Aï¼Œ20ä¸‡æ¡ä½œä¸ºæµ‹è¯•é›†Bï¼ŒåŒæ—¶ä¼šå¯¹employmentTitleã€purposeã€postCodeå’Œtitleç­‰ä¿¡æ¯è¿›è¡Œè„±æ•ã€‚

é€šè¿‡è¿™é“èµ›é¢˜æ¥å¼•å¯¼å¤§å®¶èµ°è¿›é‡‘èé£æ§æ•°æ®ç«èµ›çš„ä¸–ç•Œï¼Œä¸»è¦é’ˆå¯¹äºäºç«èµ›æ–°äººè¿›è¡Œè‡ªæˆ‘ç»ƒä¹ ã€è‡ªæˆ‘æé«˜ã€‚

1.2.2 æ•°æ®æ¦‚å†µ
ä¸€èˆ¬è€Œè¨€ï¼Œå¯¹äºæ•°æ®åœ¨æ¯”èµ›ç•Œé¢éƒ½æœ‰å¯¹åº”çš„æ•°æ®æ¦‚å†µä»‹ç»ï¼ˆåŒ¿åç‰¹å¾é™¤å¤–ï¼‰ï¼Œè¯´æ˜åˆ—çš„æ€§è´¨ç‰¹å¾ã€‚äº†è§£åˆ—çš„æ€§è´¨ä¼šæœ‰åŠ©äºæˆ‘ä»¬å¯¹äºæ•°æ®çš„ç†è§£å’Œåç»­åˆ†æã€‚ Tip:åŒ¿åç‰¹å¾ï¼Œå°±æ˜¯æœªå‘ŠçŸ¥æ•°æ®åˆ—æ‰€å±çš„æ€§è´¨çš„ç‰¹å¾åˆ—ã€‚

train.csv

id ä¸ºè´·æ¬¾æ¸…å•åˆ†é…çš„å”¯ä¸€ä¿¡ç”¨è¯æ ‡è¯†
loanAmnt è´·æ¬¾é‡‘é¢
term è´·æ¬¾æœŸé™ï¼ˆyearï¼‰
interestRate è´·æ¬¾åˆ©ç‡
installment åˆ†æœŸä»˜æ¬¾é‡‘é¢
grade è´·æ¬¾ç­‰çº§
subGrade è´·æ¬¾ç­‰çº§ä¹‹å­çº§
employmentTitle å°±ä¸šèŒç§°
employmentLength å°±ä¸šå¹´é™ï¼ˆå¹´ï¼‰
homeOwnership å€Ÿæ¬¾äººåœ¨ç™»è®°æ—¶æä¾›çš„æˆ¿å±‹æ‰€æœ‰æƒçŠ¶å†µ
annualIncome å¹´æ”¶å…¥
verificationStatus éªŒè¯çŠ¶æ€
issueDate è´·æ¬¾å‘æ”¾çš„æœˆä»½
purpose å€Ÿæ¬¾äººåœ¨è´·æ¬¾ç”³è¯·æ—¶çš„è´·æ¬¾ç”¨é€”ç±»åˆ«
postCode å€Ÿæ¬¾äººåœ¨è´·æ¬¾ç”³è¯·ä¸­æä¾›çš„é‚®æ”¿ç¼–ç çš„å‰3ä½æ•°å­—
regionCode åœ°åŒºç¼–ç 
dti å€ºåŠ¡æ”¶å…¥æ¯”
delinquency_2years å€Ÿæ¬¾äººè¿‡å»2å¹´ä¿¡ç”¨æ¡£æ¡ˆä¸­é€¾æœŸ30å¤©ä»¥ä¸Šçš„è¿çº¦äº‹ä»¶æ•°
ficoRangeLow å€Ÿæ¬¾äººåœ¨è´·æ¬¾å‘æ”¾æ—¶çš„ficoæ‰€å±çš„ä¸‹é™èŒƒå›´
ficoRangeHigh å€Ÿæ¬¾äººåœ¨è´·æ¬¾å‘æ”¾æ—¶çš„ficoæ‰€å±çš„ä¸Šé™èŒƒå›´
openAcc å€Ÿæ¬¾äººä¿¡ç”¨æ¡£æ¡ˆä¸­æœªç»“ä¿¡ç”¨é¢åº¦çš„æ•°é‡
pubRec è´¬æŸå…¬å…±è®°å½•çš„æ•°é‡
pubRecBankruptcies å…¬å¼€è®°å½•æ¸…é™¤çš„æ•°é‡
revolBal ä¿¡è´·å‘¨è½¬ä½™é¢åˆè®¡
revolUtil å¾ªç¯é¢åº¦åˆ©ç”¨ç‡ï¼Œæˆ–å€Ÿæ¬¾äººä½¿ç”¨çš„ç›¸å¯¹äºæ‰€æœ‰å¯ç”¨å¾ªç¯ä¿¡è´·çš„ä¿¡è´·é‡‘é¢
totalAcc å€Ÿæ¬¾äººä¿¡ç”¨æ¡£æ¡ˆä¸­å½“å‰çš„ä¿¡ç”¨é¢åº¦æ€»æ•°
initialListStatus è´·æ¬¾çš„åˆå§‹åˆ—è¡¨çŠ¶æ€
applicationType è¡¨æ˜è´·æ¬¾æ˜¯ä¸ªäººç”³è¯·è¿˜æ˜¯ä¸ä¸¤ä¸ªå…±åŒå€Ÿæ¬¾äººçš„è”åˆç”³è¯·
earliesCreditLine å€Ÿæ¬¾äººæœ€æ—©æŠ¥å‘Šçš„ä¿¡ç”¨é¢åº¦å¼€ç«‹çš„æœˆä»½
title å€Ÿæ¬¾äººæä¾›çš„è´·æ¬¾åç§°
policyCode å…¬å¼€å¯ç”¨çš„ç­–ç•¥_ä»£ç =1æ–°äº§å“ä¸å…¬å¼€å¯ç”¨çš„ç­–ç•¥_ä»£ç =2
nç³»åˆ—åŒ¿åç‰¹å¾ åŒ¿åç‰¹å¾n0-n14ï¼Œä¸ºä¸€äº›è´·æ¬¾äººè¡Œä¸ºè®¡æ•°ç‰¹å¾çš„å¤„ç†
1.2.3 é¢„æµ‹æŒ‡æ ‡
ç«èµ›é‡‡ç”¨AUCä½œä¸ºè¯„ä»·æŒ‡æ ‡ã€‚AUCï¼ˆArea Under Curveï¼‰è¢«å®šä¹‰ä¸º ROCæ›²çº¿ ä¸‹ä¸åæ ‡è½´å›´æˆçš„é¢ç§¯ã€‚

åˆ†ç±»ç®—æ³•å¸¸è§çš„è¯„ä¼°æŒ‡æ ‡å¦‚ä¸‹ï¼š
1ã€æ··æ·†çŸ©é˜µï¼ˆConfuse Matrixï¼‰

ï¼ˆ1ï¼‰è‹¥ä¸€ä¸ªå®ä¾‹æ˜¯æ­£ç±»ï¼Œå¹¶ä¸”è¢«é¢„æµ‹ä¸ºæ­£ç±»ï¼Œå³ä¸ºçœŸæ­£ç±»TP(True Positive )
ï¼ˆ2ï¼‰è‹¥ä¸€ä¸ªå®ä¾‹æ˜¯æ­£ç±»ï¼Œä½†æ˜¯è¢«é¢„æµ‹ä¸ºè´Ÿç±»ï¼Œå³ä¸ºå‡è´Ÿç±»FN(False Negative )
ï¼ˆ3ï¼‰è‹¥ä¸€ä¸ªå®ä¾‹æ˜¯è´Ÿç±»ï¼Œä½†æ˜¯è¢«é¢„æµ‹ä¸ºæ­£ç±»ï¼Œå³ä¸ºå‡æ­£ç±»FP(False Positive )
ï¼ˆ4ï¼‰è‹¥ä¸€ä¸ªå®ä¾‹æ˜¯è´Ÿç±»ï¼Œå¹¶ä¸”è¢«é¢„æµ‹ä¸ºè´Ÿç±»ï¼Œå³ä¸ºçœŸè´Ÿç±»TN(True Negative )
2ã€å‡†ç¡®ç‡ï¼ˆAccuracyï¼‰ å‡†ç¡®ç‡æ˜¯å¸¸ç”¨çš„ä¸€ä¸ªè¯„ä»·æŒ‡æ ‡ï¼Œä½†æ˜¯ä¸é€‚åˆæ ·æœ¬ä¸å‡è¡¡çš„æƒ…å†µã€‚
ğ´ğ‘ğ‘ğ‘¢ğ‘Ÿğ‘ğ‘ğ‘¦=ğ‘‡ğ‘ƒ+ğ‘‡ğ‘ğ‘‡ğ‘ƒ+ğ‘‡ğ‘+ğ¹ğ‘ƒ+ğ¹ğ‘
 
3ã€ç²¾ç¡®ç‡ï¼ˆPrecisionï¼‰ åˆç§°æŸ¥å‡†ç‡ï¼Œæ­£ç¡®é¢„æµ‹ä¸ºæ­£æ ·æœ¬ï¼ˆTPï¼‰å é¢„æµ‹ä¸ºæ­£æ ·æœ¬(TP+FP)çš„ç™¾åˆ†æ¯”ã€‚
ğ‘ƒğ‘Ÿğ‘’ğ‘ğ‘–ğ‘ ğ‘–ğ‘œğ‘›=ğ‘‡ğ‘ƒğ‘‡ğ‘ƒ+ğ¹ğ‘ƒ
 
4ã€å¬å›ç‡ï¼ˆRecallï¼‰ åˆç§°ä¸ºæŸ¥å…¨ç‡ï¼Œæ­£ç¡®é¢„æµ‹ä¸ºæ­£æ ·æœ¬ï¼ˆTPï¼‰å æ­£æ ·æœ¬(TP+FN)çš„ç™¾åˆ†æ¯”ã€‚
ğ‘…ğ‘’ğ‘ğ‘ğ‘™ğ‘™=ğ‘‡ğ‘ƒğ‘‡ğ‘ƒ+ğ¹ğ‘
 
5ã€F1 Score ç²¾ç¡®ç‡å’Œå¬å›ç‡æ˜¯ç›¸äº’å½±å“çš„ï¼Œç²¾ç¡®ç‡å‡é«˜åˆ™å¬å›ç‡ä¸‹é™ï¼Œå¬å›ç‡å‡é«˜åˆ™ç²¾ç¡®ç‡ä¸‹é™ï¼Œå¦‚æœéœ€è¦å…¼é¡¾äºŒè€…ï¼Œå°±éœ€è¦ç²¾ç¡®ç‡ã€å¬å›ç‡çš„ç»“åˆF1 Scoreã€‚
ğ¹1âˆ’ğ‘†ğ‘ğ‘œğ‘Ÿğ‘’=21ğ‘ƒğ‘Ÿğ‘’ğ‘ğ‘–ğ‘ ğ‘–ğ‘œğ‘›+1ğ‘…ğ‘’ğ‘ğ‘ğ‘™ğ‘™
 
6ã€P-Ræ›²çº¿ï¼ˆPrecision-Recall Curveï¼‰ P-Ræ›²çº¿æ˜¯æè¿°ç²¾ç¡®ç‡å’Œå¬å›ç‡å˜åŒ–çš„æ›²çº¿

p-r
7ã€ROCï¼ˆReceiver Operating Characteristicï¼‰

ROCç©ºé—´å°†å‡æ­£ä¾‹ç‡ï¼ˆFPRï¼‰å®šä¹‰ä¸º X è½´ï¼ŒçœŸæ­£ä¾‹ç‡ï¼ˆTPRï¼‰å®šä¹‰ä¸º Y è½´ã€‚
TPRï¼šåœ¨æ‰€æœ‰å®é™…ä¸ºæ­£ä¾‹çš„æ ·æœ¬ä¸­ï¼Œè¢«æ­£ç¡®åœ°åˆ¤æ–­ä¸ºæ­£ä¾‹ä¹‹æ¯”ç‡ã€‚
ğ‘‡ğ‘ƒğ‘…=ğ‘‡ğ‘ƒğ‘‡ğ‘ƒ+ğ¹ğ‘
 
FPRï¼šåœ¨æ‰€æœ‰å®é™…ä¸ºè´Ÿä¾‹çš„æ ·æœ¬ä¸­ï¼Œè¢«é”™è¯¯åœ°åˆ¤æ–­ä¸ºæ­£ä¾‹ä¹‹æ¯”ç‡ã€‚
ğ¹ğ‘ƒğ‘…=ğ¹ğ‘ƒğ¹ğ‘ƒ+ğ‘‡ğ‘
 
roc.png

8ã€AUC(Area Under Curve) AUCï¼ˆArea Under Curveï¼‰è¢«å®šä¹‰ä¸º ROCæ›²çº¿ ä¸‹ä¸åæ ‡è½´å›´æˆçš„é¢ç§¯ï¼Œæ˜¾ç„¶è¿™ä¸ªé¢ç§¯çš„æ•°å€¼ä¸ä¼šå¤§äº1ã€‚åˆç”±äºROCæ›²çº¿ä¸€èˆ¬éƒ½å¤„äºy=xè¿™æ¡ç›´çº¿çš„ä¸Šæ–¹ï¼Œæ‰€ä»¥AUCçš„å–å€¼èŒƒå›´åœ¨0.5å’Œ1ä¹‹é—´ã€‚AUCè¶Šæ¥è¿‘1.0ï¼Œæ£€æµ‹æ–¹æ³•çœŸå®æ€§è¶Šé«˜;ç­‰äº0.5æ—¶ï¼Œåˆ™çœŸå®æ€§æœ€ä½ï¼Œæ— åº”ç”¨ä»·å€¼ã€‚

å¯¹äºé‡‘èé£æ§é¢„æµ‹ç±»å¸¸è§çš„è¯„ä¼°æŒ‡æ ‡å¦‚ä¸‹:
1ã€KS(Kolmogorov-Smirnov) KSç»Ÿè®¡é‡ç”±ä¸¤ä½è‹è”æ•°å­¦å®¶A.N. Kolmogorovå’ŒN.V. Smirnovæå‡ºã€‚åœ¨é£æ§ä¸­ï¼ŒKSå¸¸ç”¨äºè¯„ä¼°æ¨¡å‹åŒºåˆ†åº¦ã€‚åŒºåˆ†åº¦è¶Šå¤§ï¼Œè¯´æ˜æ¨¡å‹çš„é£é™©æ’åºèƒ½åŠ›ï¼ˆranking abilityï¼‰è¶Šå¼ºã€‚ K-Sæ›²çº¿ä¸ROCæ›²çº¿ç±»ä¼¼ï¼Œä¸åŒåœ¨äº

ROCæ›²çº¿å°†çœŸæ­£ä¾‹ç‡å’Œå‡æ­£ä¾‹ç‡ä½œä¸ºæ¨ªçºµè½´
K-Sæ›²çº¿å°†çœŸæ­£ä¾‹ç‡å’Œå‡æ­£ä¾‹ç‡éƒ½ä½œä¸ºçºµè½´ï¼Œæ¨ªè½´åˆ™ç”±é€‰å®šçš„é˜ˆå€¼æ¥å……å½“ã€‚ å…¬å¼å¦‚ä¸‹ï¼š
ğ¾ğ‘†=ğ‘šğ‘ğ‘¥(ğ‘‡ğ‘ƒğ‘…âˆ’ğ¹ğ‘ƒğ‘…)
 
KSä¸åŒä»£è¡¨çš„ä¸åŒæƒ…å†µï¼Œä¸€èˆ¬æƒ…å†µKSå€¼è¶Šå¤§ï¼Œæ¨¡å‹çš„åŒºåˆ†èƒ½åŠ›è¶Šå¼ºï¼Œä½†æ˜¯ä¹Ÿä¸æ˜¯è¶Šå¤§æ¨¡å‹æ•ˆæœå°±è¶Šå¥½ï¼Œå¦‚æœKSè¿‡å¤§ï¼Œæ¨¡å‹å¯èƒ½å­˜åœ¨å¼‚å¸¸ï¼Œæ‰€ä»¥å½“KSå€¼è¿‡é«˜å¯èƒ½éœ€è¦æ£€æŸ¥æ¨¡å‹æ˜¯å¦è¿‡æ‹Ÿåˆã€‚ä»¥ä¸‹ä¸ºKSå€¼å¯¹åº”çš„æ¨¡å‹æƒ…å†µï¼Œä½†æ­¤å¯¹åº”ä¸æ˜¯å”¯ä¸€çš„ï¼Œåªä»£è¡¨å¤§è‡´è¶‹åŠ¿ã€‚
KSï¼ˆ%ï¼‰	å¥½ååŒºåˆ†èƒ½åŠ›
20ä»¥ä¸‹	ä¸å»ºè®®é‡‡ç”¨
20-40	è¾ƒå¥½
41-50	è‰¯å¥½
51-60	å¾ˆå¼º
61-75	éå¸¸å¼º
75ä»¥ä¸Š	è¿‡äºé«˜ï¼Œç–‘ä¼¼å­˜åœ¨é—®é¢˜
2ã€ROC

3ã€AUC

1.3.1 æ•°æ®è¯»å–pandas
è¯»å–æ•°æ®æœ‰ä¸¤ç§æ–¹æ³•ï¼Œç¬¬ä¸€ç§é€šè¿‡wgetå‘½ä»¤ä»é“¾æ¥ç›´æ¥ä¸‹è½½æ•°æ®åˆ°dswï¼Œå¦ä¸€ç§å°±æ˜¯å¯ä»¥ç›´æ¥åˆ©ç”¨pandasè¯»å–é“¾æ¥æ•°æ®ã€‚

# å¯¼å…¥æ•°æ®è¯»å–æ¨¡å—
import pandas as pd
# æ–¹æ³•ä¸€ï¼šç›´æ¥ä¸‹è½½åˆ°dswæœ¬åœ°ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯åé¢æ•°æ®è¯»å–ä¼šå¿«ç‚¹ï¼Œä½†æ˜¯ç›´æ¥ä¸‹è½½åˆ°æœ¬åœ°ä¼šå ç”¨æ¯”è¾ƒå¤šçš„å†…å­˜
# ä¸‹è½½æµ‹è¯•æ•°æ®é›† 41.33mb
!wget http://tianchi-media.oss-cn-beijing.aliyuncs.com/dragonball/FRC/data_set/testA.csv
# ä¸‹è½½è®­ç»ƒæ•°æ®é›† 166.77mb
!wget http://tianchi-media.oss-cn-beijing.aliyuncs.com/dragonball/FRC/data_set/train.csv
--2021-11-29 10:47:44--  http://tianchi-media.oss-cn-beijing.aliyuncs.com/dragonball/FRC/data_set/testA.csv
Resolving tianchi-media.oss-cn-beijing.aliyuncs.com (tianchi-media.oss-cn-beijing.aliyuncs.com)... 59.110.185.93
Connecting to tianchi-media.oss-cn-beijing.aliyuncs.com (tianchi-media.oss-cn-beijing.aliyuncs.com)|59.110.185.93|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 43342822 (41M) [text/csv]
Saving to: â€˜testA.csvâ€™

100%[======================================>] 43,342,822  15.7MB/s   in 2.6s   

2021-11-29 10:47:47 (15.7 MB/s) - â€˜testA.csvâ€™ saved [43342822/43342822]

--2021-11-29 10:47:47--  http://tianchi-media.oss-cn-beijing.aliyuncs.com/dragonball/FRC/data_set/train.csv
Resolving tianchi-media.oss-cn-beijing.aliyuncs.com (tianchi-media.oss-cn-beijing.aliyuncs.com)... 59.110.185.93
Connecting to tianchi-media.oss-cn-beijing.aliyuncs.com (tianchi-media.oss-cn-beijing.aliyuncs.com)|59.110.185.93|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 174866396 (167M) [text/csv]
Saving to: â€˜train.csvâ€™

100%[======================================>] 174,866,396 12.1MB/s   in 14s    

2021-11-29 10:48:02 (12.0 MB/s) - â€˜train.csvâ€™ saved [174866396/174866396]

train = pd.read_csv('train.csv')
testA = pd.read_csv('testA.csv')
# ï¼ˆæ¨èï¼‰æ–¹æ³•äºŒï¼šç›´æ¥è¯»å–
# ï¼ˆæ¨èï¼‰æ–¹æ³•äºŒï¼šç›´æ¥è¯»å–é“¾æ¥æ•°æ®ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯ä¸å dswå†…å­˜ï¼Œä½†æ˜¯è¯»å–é€Ÿåº¦ç›¸å¯¹ä¼šæ¯”è¾ƒæ…¢ç‚¹
train = pd.read_csv('http://tianchi-media.oss-cn-beijing.aliyuncs.com/dragonball/FRC/data_set/train.csv')
testA = pd.read_csv('http://tianchi-media.oss-cn-beijing.aliyuncs.com/dragonball/FRC/data_set/testA.csv')
print('Train data shape:',train.shape)
print('TestA data shape:',testA.shape)
Train data shape: (800000, 47)
TestA data shape: (200000, 46)
train.head()
id	loanAmnt	term	interestRate	installment	grade	subGrade	employmentTitle	employmentLength	homeOwnership	...	n5	n6	n7	n8	n9	n10	n11	n12	n13	n14
0	0	35000.0	5	19.52	917.97	E	E2	320.0	2 years	2	...	9.0	8.0	4.0	12.0	2.0	7.0	0.0	0.0	0.0	2.0
1	1	18000.0	5	18.49	461.90	D	D2	219843.0	5 years	0	...	NaN	NaN	NaN	NaN	NaN	13.0	NaN	NaN	NaN	NaN
2	2	12000.0	5	16.99	298.17	D	D3	31698.0	8 years	0	...	0.0	21.0	4.0	5.0	3.0	11.0	0.0	0.0	0.0	4.0
3	3	11000.0	3	7.26	340.96	A	A4	46854.0	10+ years	1	...	16.0	4.0	7.0	21.0	6.0	9.0	0.0	0.0	0.0	1.0
4	4	3000.0	3	12.99	101.07	C	C2	54.0	NaN	1	...	4.0	9.0	10.0	15.0	7.0	12.0	0.0	0.0	0.0	4.0
5 rows Ã— 47 columns

1.3.2 åˆ†ç±»æŒ‡æ ‡è¯„ä»·è®¡ç®—ç¤ºä¾‹
## æ··æ·†çŸ©é˜µ
import numpy as np
from sklearn.metrics import confusion_matrix
y_pred = [0, 1, 0, 1]
y_true = [0, 1, 1, 0]
print('æ··æ·†çŸ©é˜µ:\n',confusion_matrix(y_true, y_pred))
æ··æ·†çŸ©é˜µ:
 [[1 1]
 [1 1]]
## accuracy
from sklearn.metrics import accuracy_score
y_pred = [0, 1, 0, 1]
y_true = [0, 1, 1, 0]
print('ACC:',accuracy_score(y_true, y_pred))
ACC: 0.5
## Precision,Recall,F1-score
from sklearn import metrics
y_pred = [0, 1, 0, 1]
y_true = [0, 1, 1, 0]
print('Precision',metrics.precision_score(y_true, y_pred))
print('Recall',metrics.recall_score(y_true, y_pred))
print('F1-score:',metrics.f1_score(y_true, y_pred))
Precision 0.5
Recall 0.5
F1-score: 0.5
## P-Ræ›²çº¿
import matplotlib.pyplot as plt
from sklearn.metrics import precision_recall_curve
y_pred = [0, 1, 1, 0, 1, 1, 0, 1, 1, 1]
y_true = [0, 1, 1, 0, 1, 0, 1, 1, 0, 1]
precision, recall, thresholds = precision_recall_curve(y_true, y_pred)
plt.plot(precision, recall)
[<matplotlib.lines.Line2D at 0x7fd8b60222b0>]

## ROCæ›²çº¿
from sklearn.metrics import roc_curve
y_pred = [0, 1, 1, 0, 1, 1, 0, 1, 1, 1]
y_true = [0, 1, 1, 0, 1, 0, 1, 1, 0, 1]
FPR,TPR,thresholds=roc_curve(y_true, y_pred)
plt.title('ROC')
plt.plot(FPR, TPR,'b')
plt.plot([0,1],[0,1],'r--')
plt.ylabel('TPR')
plt.xlabel('FPR')
Text(0.5, 0, 'FPR')

## AUC
import numpy as np
from sklearn.metrics import roc_auc_score
y_true = np.array([0, 0, 1, 1])
y_scores = np.array([0.1, 0.4, 0.35, 0.8])
print('AUC socre:',roc_auc_score(y_true, y_scores))
AUC socre: 0.75
### 1.5 æ‹“å±•çŸ¥è¯†â€”â€”è¯„åˆ†å¡
è¯„åˆ†å¡æ˜¯ä¸€å¼ æ‹¥æœ‰åˆ†æ•°åˆ»åº¦ä¼šè®©ç›¸åº”é˜ˆå€¼çš„è¡¨ã€‚ä¿¡ç”¨è¯„åˆ†å¡æ˜¯ç”¨äºç”¨æˆ·ä¿¡ç”¨çš„ä¸€å¼ åˆ»åº¦è¡¨ã€‚ä»¥ä¸‹ä»£ç æ˜¯ä¸€ä¸ªéæ ‡å‡†è¯„åˆ†å¡çš„ä»£ç æµç¨‹ï¼Œç”¨äºåˆ»ç”»ç”¨æˆ·çš„ä¿¡ç”¨è¯„åˆ†ã€‚è¯„åˆ†å¡æ˜¯é‡‘èé£æ§ä¸­å¸¸ç”¨çš„ä¸€ç§å¯¹äºç”¨æˆ·ä¿¡ç”¨è¿›è¡Œåˆ»ç”»çš„æ‰‹æ®µå“¦ï¼
â€‹
#è¯„åˆ†å¡ ä¸æ˜¯æ ‡å‡†è¯„åˆ†å¡
def Score(prob,P0=600,PDO=20,badrate=None,goodrate=None):
    P0 = P0
    PDO = PDO
    theta0 = badrate/goodrate
    B = PDO/np.log(2)
    A = P0 + B*np.log(2*theta0)
    score = A-B*np.log(prob/(1-prob))
    return score
#è¯„åˆ†å¡ ä¸æ˜¯æ ‡å‡†è¯„åˆ†å¡
def Score(prob,P0=600,PDO=20,badrate=None,goodrate=None):
    P0 = P0
    PDO = PDO
    theta0 = badrate/goodrate
    B = PDO/np.log(2)
    A = P0 + B*np.log(2*theta0)
    score = A-B*np.log(prob/(1-prob))
    return score
